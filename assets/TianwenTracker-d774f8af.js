import{_ as R,g as V,h as W,u as z,a as D,r as v,i as C,j as k,n as T,w as F,k as j,b as A,o as l,c,l as x,d as s,F as u,m as P,e as I,f as U,t as _,p as G}from"./index-008ee3cd.js";import{I as J}from"./InputWrapper-2606704e.js";const K={name:"TianwenTracker",components:{InputWrapper:J},setup(){const g=V.useToast(),e=W(),h=z(),t=D(),M=v(""),d=C(()=>t.getCurrentMessages),y=v(null),n=v(!1),o=v(0),f=4;v(0);const r=["网络开设赌场罪的侦查期限是多久？","个人参加小额度网络赌博一般如何处理？","如何对对网络赌博应用暗网作为媒介的问题？","网络赌博如何取证？","网络赌博一般期限在多久？","张三的身份证号是多少？","显示张三最近一次出入境记录","张三的电话号码是多少？","张三有几个手机号？","显示张三最近一次通话记录","张三的年龄多大？","张三户籍地在哪？","显示张三的人员基本信息","张三的背景是什么？","张三的出入境理由是什么？","张三是哪国公民？","张三上次通话的对端号码是多少？","显示张三近期的对端电话号码","显示张三近期对端用户姓名","张三上次通话电话的对端姓名是什么？","张三上次通话时间是什么时候？","张三上次通话持续了多久？","显示张三的主账户信息","张三上次资金转账交易方的户名是什么？","张三交易账户的开户银行是哪家？","显示张三的对手户姓名","张三上次交易使用的的交易币是什么？","张三目前账户的交易余额是多少？","显示张三近期来的借贷标志","显示张三的性别","张三的民族是什么？","张三综合违法性评级是多少？","张三同住址人员有哪些？","张三同户号人员是那些？","张三同乘车人员有哪些？","张三同乘机人员有哪些？","张三的同出入境人员有哪些？","张三的同案人员有哪些？","张三的同住宿人员是哪些？","张三同订票人员有哪些？","显示张三的服兵役情况","显示张三的驾驶信息","显示张三的车辆信息","显示张三的出入证件信息","显示张三的机动车违章情况","显示张三的出入境记录","显示张三的银行核查信息","显示张三的民航离岗记录","显示张三的旅客住宿信息定位张三上次住宿的旅店","定位张三的居住地点","定位张三的出入境地点","定位张三同行人员的出境信息"],S=C(()=>t.getStatus),m=v(null),b=()=>{m.value&&T(()=>{m.value.scrollTop=m.value.scrollHeight})};k(()=>{const a=e.query.id;e.query.restore==="true"&&a?t.restoreConversation(a)&&T(()=>{b()}):t.createdEmptyConversation()});const w=async a=>{d.value.length===0&&await t.createConversation("tianwen",!0),await t.sendMessage(a,"tianwen"),d.value.length===1&&t.currentConversation&&h.replace({name:"Tianwen",query:{id:t.currentConversation.id,new:!0}}),b()};F(()=>t.getMessage,()=>{b()},{deep:!0});const Q=a=>new Date(a).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),q=C(()=>{const a=o.value*4;return r.slice(a,a+4)}),B=()=>{o.value<Math.ceil(r.length/4)-1&&o.value++},L=()=>{o.value>0&&o.value--},H=()=>{const a=[...r].sort(()=>Math.random()-.5);r.splice(0,r.length,...a),o.value=0},N=a=>{w({query:a})};return k(()=>{const a=setInterval(()=>{o.value<Math.ceil(r.length/f)-1?o.value++:o.value=0},5e3);j(()=>{clearInterval(a)})}),{chatStore:t,status:S,inputMessage:M,messages:d,chatContent:y,showQuestions:n,toggleQuestions:()=>{n.value=!n.value},selectQuestion:N,handleInputBlur:()=>{setTimeout(()=>{n.value=!1},200)},sendMessage:w,formatTime:Q,currentPage:o,allQuestions:r,currentPageQuestions:q,nextPage:B,prevPage:L,refreshQuestions:H,copyMessage:async a=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(a),g.success("已复制到剪切板！");else{const i=document.createElement("textarea");return i.value=a,document.body.appendChild(i),i.focus(),i.select(),g.success("已复制到剪切板！"),new Promise((p,E)=>{document.execCommand("copy")?p():E(),i.remove()})}}catch(i){console.error("复制失败:",i),g.error("复制失败："+i)}},shareMessage:a=>{console.log("分享消息:",a)},favoriteMessage:a=>{console.log("收藏消息:",a)},deleteMessage:a=>{const i=d.value.findIndex(p=>p.id===a.id);i!==-1&&d.value.splice(i,1)},messagesContainer:m,scrollToBottom:b,switchMode:a=>{h.push({name:a==="tianwen"?"Tianwen":"Strategy",query:{fromChat:!0,lastMessage:M.value}})}}}},O={class:"strategy-container"},X={class:"chat-interface"},Y={class:"messages-container",ref:"messagesContainer"},Z={class:"message ai"},$={class:"message-wrapper"},ss={class:"message-content"},es={class:"questions-header"},ts={class:"nav-buttons"},as=["disabled"],ns=["disabled"],os={class:"questions-list"},is=["onClick"],ls={class:"message-wrapper"},cs=["innerHTML"],rs={class:"message-wrapper"},ds=["innerHTML"],vs={class:"message-footer"},us={class:"message-time"},fs={class:"message-actions"},gs=["onClick"],ms=["onClick"],bs={class:"message-wrapper"},ps={class:"message-content"},_s={class:"message-footer"},hs={class:"message-time"},Ms={class:"message-actions"},ys=["onClick"],Cs=["onClick"],ws={class:"input-section"},ks={class:"mode-selector"};function Ts(g,e,h,t,M,d){const y=A("InputWrapper");return l(),c("div",O,[e[19]||(e[19]=x('<div class="header" data-v-c28eb1f7><div class="title-section" data-v-c28eb1f7><div class="icon" data-v-c28eb1f7><i class="fas fa-search-location" data-v-c28eb1f7></i></div><span class="title" data-v-c28eb1f7>天网追缉</span></div><div class="actions" data-v-c28eb1f7><button class="action-btn" title="收藏" data-v-c28eb1f7><i class="fas fa-star" data-v-c28eb1f7></i><div class="btn-hover-bg" data-v-c28eb1f7></div></button><button class="action-btn" title="通知" data-v-c28eb1f7><i class="fas fa-bell" data-v-c28eb1f7></i><div class="btn-hover-bg" data-v-c28eb1f7></div></button></div></div>',1)),s("div",X,[s("div",Y,[e[16]||(e[16]=x('<div class="message ai" data-v-c28eb1f7><div class="avatar" data-v-c28eb1f7><i class="fas fa-search-location" data-v-c28eb1f7></i></div><div class="message-wrapper" data-v-c28eb1f7><div class="message-content" data-v-c28eb1f7>我是天网追缉小助手，请你询问:</div><div class="message-time" data-v-c28eb1f7>13:45</div></div></div>',1)),s("div",Z,[e[7]||(e[7]=s("div",{class:"avatar"},[s("i",{class:"fas fa-search-location"})],-1)),s("div",$,[s("div",ss,[s("div",es,[e[5]||(e[5]=s("span",null,"你可以这样问我：",-1)),s("div",ts,[s("button",{onClick:e[0]||(e[0]=(...n)=>t.prevPage&&t.prevPage(...n)),disabled:t.currentPage===0},e[3]||(e[3]=[s("i",{class:"fas fa-chevron-left"},null,-1)]),8,as),s("button",{onClick:e[1]||(e[1]=(...n)=>t.nextPage&&t.nextPage(...n)),disabled:t.currentPage>=Math.ceil(t.allQuestions.length/4)-1},e[4]||(e[4]=[s("i",{class:"fas fa-chevron-right"},null,-1)]),8,ns)])]),s("div",os,[(l(!0),c(u,null,P(t.currentPageQuestions,n=>(l(),c("div",{key:n,class:"question-item",onClick:o=>t.selectQuestion(n)},_(n),9,is))),128))])]),e[6]||(e[6]=s("div",{class:"message-time"},"13:45",-1))])]),(l(!0),c(u,null,P(t.messages,(n,o)=>(l(),c("div",{key:n.id,class:G(["message",n.type])},[n.type==="ai"?(l(),c(u,{key:0},[t.status&&t.messages.length-1===o?(l(),c(u,{key:0},[e[9]||(e[9]=s("div",{class:"avatar"},[s("i",{class:"fas fa-robot"})],-1)),s("div",ls,[s("div",{class:"message-content",innerHTML:t.chatStore.getMessage},null,8,cs),e[8]||(e[8]=s("div",{class:"message-footer"},[s("div",{class:"message-time"})],-1))])],64)):(l(),c(u,{key:1},[e[12]||(e[12]=s("div",{class:"avatar"},[s("i",{class:"fas fa-search-location"})],-1)),s("div",rs,[s("div",{class:"message-content",innerHTML:n.content},null,8,ds),s("div",vs,[s("div",us,_(t.formatTime(n.timestamp)),1),s("div",fs,[s("button",{class:"action-icon",onClick:f=>t.copyMessage(n.content),title:"复制"},e[10]||(e[10]=[s("i",{class:"fas fa-copy"},null,-1)]),8,gs),s("button",{class:"action-icon",onClick:f=>t.favoriteMessage(n),title:"收藏"},e[11]||(e[11]=[s("i",{class:"fas fa-star"},null,-1)]),8,ms)])])])],64))],64)):(l(),c(u,{key:1},[s("div",bs,[s("div",ps,_(n.content),1),s("div",_s,[s("div",hs,_(t.formatTime(n.timestamp)),1),s("div",Ms,[s("button",{class:"action-icon",onClick:f=>t.copyMessage(n.content),title:"复制"},e[13]||(e[13]=[s("i",{class:"fas fa-copy"},null,-1)]),8,ys),s("button",{class:"action-icon",onClick:f=>t.deleteMessage(n),title:"删除"},e[14]||(e[14]=[s("i",{class:"fas fa-trash"},null,-1)]),8,Cs)])])]),e[15]||(e[15]=s("div",{class:"avatar user-avatar"},[s("i",{class:"fas fa-user"})],-1))],64))],2))),128))],512),s("div",ws,[s("div",ks,[e[18]||(e[18]=s("button",{class:"mode-btn active"},[s("i",{class:"fas fa-search-location"}),I(" 天网追缉 ")],-1)),s("button",{class:"mode-btn",onClick:e[2]||(e[2]=n=>t.switchMode("strategy"))},e[17]||(e[17]=[s("i",{class:"fas fa-book"},null,-1),I(" 侦查谋略 ")]))]),U(y,{onSendMessage:t.sendMessage},null,8,["onSendMessage"])])])])}const Ns=R(K,[["render",Ts],["__scopeId","data-v-c28eb1f7"]]);export{Ns as default};
